<html>
  <body>
    <h3>Live Agent Test :</h3>
    <!--Embedded Service Snippet-->
    <!--Salesforce Embedded Service Snippet | Live Agent Button | English-->
<style type='text/css'>
    .sidebarHeader,
    h2 {
    white-space: break-spaces !important;
    }
    .embeddedServiceSidebarMinimizedDefaultUI {
    bottom: 4px;
    border-radius: 8px;
    }
    .messageContent >.embeddedServiceIcon,
    .helpButtonEnabled >.embeddedServiceIcon {
    display: none !important;
    }
    .embeddedServiceSidebarMinimizedDefaultUI .minimizedText > .message,
    .embeddedServiceHelpButton .uiButton .helpButtonLabel .message {
    white-space: normal !important;
    color: #302d2d !important;
    }
	.embeddedServiceHelpButton .helpButton .uiButton {
		background-color: #F7F1ED;
		font-family: "Arial", sans-serif;
        min-width: 190px;
        border-radius: 8px !important;
        bottom: 4px !important;
	}
    .helpButton:before {
    position: fixed;
    bottom: 6px;
    right: 215px;
    width: 42px;
    height: 42px;
    content: "";
    background: url(https://oui-sncf--int--c.documentforce.com/servlet/servlet.ImageServer?id=0150Q000000IqGc&oid=00D0Q0000000RZk);
    border: 3px solid whitesmoke;
    box-shadow: 0px 0px 8px grey;
    border-radius: 50%;
    }
	.embeddedServiceHelpButton .helpButton .uiButton:focus {
		outline: 1px solid #F7F1ED;
	}
    .offlineHelpText {
    padding-left: 5px;
    padding-right: 5px;
    }
</style>

<script type='text/javascript' src='https://service.force.com/embeddedservice/5.0/esw.min.js'></script>
<script type='text/javascript'>
	var initESW = function(gslbBaseURL) {
		embedded_svc.settings.displayHelpButton = true;
		embedded_svc.settings.language = 'en'; //Chat language

        embedded_svc.settings.defaultMinimizedText =
        "Chat with us ! Talk with an agent"; //when agent is online
        embedded_svc.settings.offlineSupportMinimizedText = "Need help ?"; //when agent is offline

		embedded_svc.settings.enabledFeatures = ['LiveAgent'];
        embedded_svc.settings.entryFeature = 'LiveAgent';
        
    //Offline Support - Start
    embedded_svc.addEventHandler("afterMaximize", function (data) {
        console.log("afterMaximize event was fired.");
        var offlineElt = document.querySelector(".offlineSupportUI");
        if (offlineElt != null) {
        offlineElt.childNodes.forEach(function (childElt) {
            childElt.style.display = "none";
        });
        var divText = document.createElement("div");
        var title = document.createElement("div");
        title.appendChild(
            document.createTextNode(
            "Do you have a question? We have the answer." //Offline Help - Title
            )
        );
        divText.appendChild(title);
        divText.appendChild(
            document.createTextNode(
            "Find all the information and practical tools you need to prepare, book and monitor your trip on our " //Offline Help
            )
        );
        divText.className = "offlineHelpText";
        offlineElt.appendChild(divText);
        var link = document.createElement("a");
        link.href = "https://en.oui.sncf/en/help-en/help-online"; //Redirect link
        link.style.color = 'blue';
        link.style.textDecoration = "underline";
        link.appendChild(document.createTextNode("online help.")); //Offline Help
        offlineElt.appendChild(link);
        }
    });
    //Offline Support - End

		embedded_svc.init(
			'https://oui-sncf.my.salesforce.com',
			'https://chatoui.secure.force.com/liveAgentSetupFlow',
			gslbBaseURL,
			'00D1t000000rAqE',
			'OUI_SNCF_Live_Chat',
			{
				baseLiveAgentContentURL: 'https://c.la2-c1-fra.salesforceliveagent.com/content',
				deploymentId: '5723W000000000f',
				buttonId: '5733W000000000u',
				baseLiveAgentURL: 'https://d.la2-c1-fra.salesforceliveagent.com/chat',
				eswLiveAgentDevName: 'OUI_SNCF_Live_Chat',
				isOfflineSupportEnabled: true
			}
		);
	};

	if (!window.embedded_svc) {
		var s = document.createElement('script');
		s.setAttribute('src', 'https://oui-sncf.my.salesforce.com/embeddedservice/5.0/esw.min.js');
		s.onload = function() {
			initESW(null);
		};
		document.body.appendChild(s);
	} else {
		initESW('https://service.force.com');
	}
</script>
  </body>
</html>
